webpackJsonp([9],{1064:function(e,a,t){var r=t(796);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);t(593)("144dfef8",r,!0)},1092:function(e,a,t){"use strict";var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("bread"),e._v(" "),t("div",{staticClass:"pageTitle"},[t("div",{staticClass:"pageLeftRight"},[t("el-container",[t("el-aside",{staticStyle:{width:"16%"}},[t("div",{staticStyle:{height:"40px","line-height":"40px","padding-left":"20px",background:"#fbfbfb"}},[e._v("行政区划")]),e._v(" "),t("el-tree",{attrs:{props:e.treeProps,load:e.loadNode,"node-key":"code",lazy:"","highlight-current":"","default-expand-all":!1,accordion:""},on:{"node-click":e.handleNodeClick}})],1),e._v(" "),t("el-main",[t("el-table",{attrs:{data:e.tableData,stripe:"",border:""}},[t("el-table-column",{attrs:{label:"行政区划编码",prop:"code",width:"200"}}),e._v(" "),t("el-table-column",{attrs:{label:"行政区划名称",prop:"name"}}),e._v(" "),t("el-table-column",{attrs:{label:"层级",prop:"areaLevel",width:"150"}}),e._v(" "),t("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"small",icon:"el-icon-edit"},on:{click:function(t){e.handleEdit(a.row)}}},[e._v("编辑")]),e._v(" "),t("el-button",{attrs:{size:"small",icon:"el-icon-delete"},on:{click:function(t){e.handleDelete(a.row)}}},[e._v("删除")]),e._v(" "),t("el-button",{attrs:{size:"small",icon:"el-icon-plus"},on:{click:function(t){e.handleAdd(a.row)}}},[e._v("添加下级")])]}}])})],1),e._v(" "),t("div",{staticClass:"Pagination",staticStyle:{"text-align":"right"}},[t("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,total:e.dataCount,"page-sizes":[10,20,30,40,50],layout:"total, sizes, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)],1)]),e._v(" "),t("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"40%",modal:""},on:{"update:visible":function(a){e.dialogVisible=a}}},[t("el-form",{attrs:{model:e.area}},[t("div",{staticStyle:{display:"none"},attrs:{slot:""},slot:"default"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.area.id,expression:"area.id"}],attrs:{type:"hidden"},domProps:{value:e.area.id},on:{input:function(a){a.target.composing||e.$set(e.area,"id",a.target.value)}}})]),e._v(" "),t("el-form-item",{attrs:{label:"行政区划编码","label-width":e.labelWidth}},[t("el-input",{attrs:{"auto-complete":"off",readonly:e.codeReadOnly},model:{value:e.area.code,callback:function(a){e.$set(e.area,"code",a)},expression:"area.code"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"行政区划名称","label-width":e.labelWidth}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.area.name,callback:function(a){e.$set(e.area,"name",a)},expression:"area.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"行政区划类型","label-width":e.labelWidth}},[t("el-select",{attrs:{disabled:""},model:{value:e.area.areaLevel,callback:function(a){e.$set(e.area,"areaLevel",a)},expression:"area.areaLevel"}},e._l(e.areaLevels,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),t("el-form-item",{attrs:{label:"上级行政区划","label-width":e.labelWidth}},[t("el-input",{attrs:{"auto-complete":"off",readonly:""},model:{value:e.area.parentCode,callback:function(a){e.$set(e.area,"parentCode",a)},expression:"area.parentCode"}}),e._v(" "),t("el-input",{staticStyle:{"padding-top":"5px"},attrs:{"auto-complete":"off",readonly:""},model:{value:e.area.parentName,callback:function(a){e.$set(e.area,"parentName",a)},expression:"area.parentName"}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{icon:"el-icon-close"},on:{click:function(a){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:e.saveData}},[e._v("保 存")])],1)],1)],1)},n=[],i={render:r,staticRenderFns:n};a.a=i},596:function(e,a,t){"use strict";function r(e){t(1064)}Object.defineProperty(a,"__esModule",{value:!0});var n=t(702),i=t(1092),s=t(12),l=r,o=s(n.a,i.a,!1,l,null,null);a.default=o.exports},702:function(e,a,t){"use strict";var r=t(23),n=t.n(r),i=t(22),s=t.n(i),l=t(14),o=function(e){return t.i(l.a)("/cc/area/list",e)},c=function(e){return t.i(l.a)("/cc/area/listForLazy",e)},u=function(e){return t.i(l.a)("/cc/area/insert",e)},d=function(e){return t.i(l.a)("/cc/area/update",e)},p=function(e){return t.i(l.a)("/cc/area/delete",e)};a.a={data:function(){return{treeProps:{label:"name",children:"children"},currentPage:1,pageSize:10,dataCount:0,clickData:{},clickNode:{},areaLevels:[{value:"1",label:"省"},{value:"2",label:"市"},{value:"3",label:"县（区）"},{value:"4",label:"镇（乡、街道）"},{value:"5",label:"村（社区）"}],tableData:[],dialogVisible:!1,dialogTitle:"",labelWidth:"120px",codeReadOnly:!1,action:"",area:{id:"",code:"",name:"",areaLevel:"",parentCode:"",parentName:""}}},methods:{handleSizeChange:function(e){this.pageSize=e,this.getListAreaData2()},handleCurrentChange:function(e){this.currentPage=e,this.getListAreaData2()},handleAdd:function(e){this.action="add",this.dialogVisible=!0,this.dialogTitle="行政区划增加",this.codeReadOnly=!1,this.area.id="",this.area.code=e.code,this.area.name="",this.area.areaLevel=(parseInt(e.areaLevel)+1).toString(),this.area.parentCode=e.code,this.area.parentName=e.name},handleEdit:function(e){this.action="edit",this.dialogVisible=!0,this.dialogTitle="行政区划修改",this.codeReadOnly=!0,this.area.id=e.id,this.area.code=e.code,this.area.name=e.name,this.area.areaLevel=e.areaLevel,this.area.parentCode=this.clickData.code,this.area.parentName=this.clickData.name},handleDelete:function(e){var a=this;this.$confirm("确定删除该键值记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){a.deleteData(e)}).catch(function(){})},saveData:function(){"add"===this.action&&this.insertData(),"edit"===this.action&&this.updateData()},handleNodeClick:function(e,a){this.clickNode=a,this.clickData=e,this.currentPage=1,this.getListAreaData2()},loadNode:function(e,a){var t=this;return s()(n.a.mark(function r(){var i,s,l;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i="",s="0",null!=e.key&&void 0!=e.key?(i=e.key,s="0"):(i="",s="1"),r.next=5,t.getLazyListAreaData(i,s,1,0);case 5:return l=r.sent,r.abrupt("return",a(l.list));case 7:case"end":return r.stop()}},r,t)}))()},getLazyListAreaData:function(e,a,t,r){var i=this;return s()(n.a.mark(function t(){var r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c({parentCode:e,scopeType:"2",isInit:a,page:1,size:0});case 2:if(r=t.sent,1==r.status){t.next=6;break}return i.$message({type:"error",message:"获取数据失败"}),t.abrupt("return");case 6:return t.abrupt("return",r.data);case 7:case"end":return t.stop()}},t,i)}))()},getListAreaData2:function(){var e=this;return s()(n.a.mark(function a(){var t;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o({parentCode:e.clickData.code,areaLevel:parseInt(e.clickData.areaLevel)+1,page:e.currentPage,size:e.pageSize});case 2:if(t=a.sent,1==t.status){a.next=6;break}return e.$message({type:"error",message:"获取数据失败"}),a.abrupt("return");case 6:e.tableData=[],t.data.list.forEach(function(a){return e.tableData.push(a)}),e.dataCount=t.data.total;case 9:case"end":return a.stop()}},a,e)}))()},insertData:function(){var e=this;return s()(n.a.mark(function a(){var t;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u(e.area);case 2:if(t=a.sent,1==t.status){a.next=6;break}return e.$message({type:"error",message:"增加数据失败"}),a.abrupt("return");case 6:e.$message({type:"success",message:"增加数据完成"}),e.dialogVisible=!1,e.getListAreaData2(),e.clickNode.loaded=!1;case 10:case"end":return a.stop()}},a,e)}))()},updateData:function(){var e=this;return s()(n.a.mark(function a(){var t;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d(e.area);case 2:if(t=a.sent,1==t.status){a.next=6;break}return e.$message({type:"error",message:"更新数据失败"}),a.abrupt("return");case 6:e.$message({type:"success",message:"更新数据完成"}),e.dialogVisible=!1,e.getListAreaData2(),e.clickNode.loaded=!1;case 10:case"end":return a.stop()}},a,e)}))()},deleteData:function(e){var a=this;return s()(n.a.mark(function t(){var r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p({id:e.id});case 2:if(r=t.sent,1==r.status){t.next=6;break}return a.$message({type:"error",message:"删除数据失败"}),t.abrupt("return");case 6:a.$message({type:"success",message:"删除数据完成"}),a.getListAreaData2(),a.clickNode.loaded=!1;case 9:case"end":return t.stop()}},t,a)}))()}}}},796:function(e,a,t){a=e.exports=t(592)(!1),a.push([e.i,".allcover{position:absolute;top:0;right:0}.ctt{left:50%;transform:translate(-50%,-50%)}.ctt,.tb{position:absolute;top:50%}.tb{transform:translateY(-50%)}.lr{position:absolute;left:50%;transform:translateX(-50%)}",""])}});