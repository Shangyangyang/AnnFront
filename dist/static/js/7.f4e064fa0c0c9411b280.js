webpackJsonp([7],{1072:function(e,t,a){var i=a(804);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a(593)("bfc0e896",i,!0)},1101:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fillcontain"},[a("bread"),e._v(" "),a("div",{staticClass:"table_container officeList"},[a("el-container",[a("el-aside",{staticStyle:{width:"16%"}},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"按行政区划",name:"areaTab"}},[a("el-tree",{attrs:{props:e.treeProps,load:e.loadNode1,"node-key":"code",lazy:"","highlight-current":"","default-expand-all":!1,accordion:""},on:{"node-click":e.handleNodeClick1}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"按层级结构",name:"levelTab"}},[a("el-tree",{attrs:{props:e.treeProps,load:e.loadNode2,"node-key":"code",lazy:"","highlight-current":"","default-expand-all":!1,accordion:""},on:{"node-click":e.handleNodeClick2}})],1)],1)],1),e._v(" "),a("el-main",[a("div",{staticStyle:{"padding-top":"10px",width:"100%","border-bottom":"1px solid #e5e5e5"}},[a("el-form",[a("el-row",[a("el-col",{attrs:{span:12}},[a("data-dict",{staticClass:"selectType",attrs:{dictType:"office_type",dictValue:e.queryOfficeTypeCode,dictLabel:e.queryOfficeTypeName,dictHolder:"组织机构类型"},on:{"update:dictValue":function(t){e.queryOfficeTypeCode=t},"update:dictLabel":function(t){e.queryOfficeTypeName=t}}}),e._v(" "),a("el-input",{staticClass:"officeName",attrs:{"auto-complete":"off",placeholder:"机构名称"},model:{value:e.queryOfficeName,callback:function(t){e.queryOfficeName=t},expression:"queryOfficeName"}})],1),e._v(" "),a("el-col",{attrs:{span:8,push:1}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.queryData}},[e._v("查 询")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showAddBtn,expression:"showAddBtn"}],attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.handleAdd()}}},[e._v("新 增")])],1)],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"98%"},attrs:{data:e.tableData,stripe:"",border:""}},[a("el-table-column",{attrs:{label:"机构编码",prop:"code",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"机构名称",prop:"name",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"机构类型",prop:"typeName",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"层级",prop:"officeLevel",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"行政区划",prop:"areaName",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"地址",prop:"address"}}),e._v(" "),a("el-table-column",{attrs:{label:"电话",prop:"phone",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"传真",prop:"fax",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"排序",prop:"sort",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",icon:"el-icon-edit"},on:{click:function(a){e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-delete"},on:{click:function(a){e.handleDelete(t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-plus"},on:{click:function(a){e.handleAdd(t.row)}}},[e._v("添加下级")])]}}])})],1),e._v(" "),a("div",{staticClass:"Pagination",staticStyle:{"text-align":"right"}},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,total:e.dataCount,"page-sizes":[10,20,30,40,50],layout:"total, sizes, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)],1),e._v(" "),a("el-dialog",{staticClass:"officeDialog",attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"50%",modal:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{attrs:{model:e.office}},[a("div",{staticStyle:{display:"none"},attrs:{slot:""},slot:"default"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.office.id,expression:"office.id"}],attrs:{type:"hidden"},domProps:{value:e.office.id},on:{input:function(t){t.target.composing||e.$set(e.office,"id",t.target.value)}}})]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",[a("label",[e._v("机构编码")]),e._v(" "),a("el-input",{attrs:{"auto-complete":"off",readonly:e.codeReadOnly},model:{value:e.office.code,callback:function(t){e.$set(e.office,"code",t)},expression:"office.code"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",[a("label",[e._v("机构名称")]),e._v(" "),a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.office.name,callback:function(t){e.$set(e.office,"name",t)},expression:"office.name"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",[a("label",[e._v("组织机构类型")]),e._v(" "),a("data-dict",{attrs:{dictType:"office_type",dictValue:e.office.type,dictLabel:e.office.typeName},on:{"update:dictValue":function(t){e.$set(e.office,"type",t)},"update:dictLabel":function(t){e.$set(e.office,"typeName",t)}}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",[a("label",[e._v("机构地址")]),e._v(" "),a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.office.address,callback:function(t){e.$set(e.office,"address",t)},expression:"office.address"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",[a("label",[e._v("电话")]),e._v(" "),a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.office.phone,callback:function(t){e.$set(e.office,"phone",t)},expression:"office.phone"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",[a("label",[e._v("传真")]),e._v(" "),a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.office.fax,callback:function(t){e.$set(e.office,"fax",t)},expression:"office.fax"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",[a("label",[e._v("排序")]),e._v(" "),a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.office.sort,callback:function(t){e.$set(e.office,"sort",t)},expression:"office.sort"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",[a("label",[e._v("层级")]),e._v(" "),a("el-input",{attrs:{"auto-complete":"off",readonly:""},model:{value:e.office.officeLevel,callback:function(t){e.$set(e.office,"officeLevel",t)},expression:"office.officeLevel"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",[a("label",[e._v("行政区划")]),e._v(" "),a("el-input",{attrs:{"auto-complete":"off",readonly:""},model:{value:e.office.areaCode,callback:function(t){e.$set(e.office,"areaCode",t)},expression:"office.areaCode"}}),e._v(" "),a("el-input",{staticStyle:{"padding-top":"5px"},attrs:{"auto-complete":"off",readonly:""},model:{value:e.office.areaName,callback:function(t){e.$set(e.office,"areaName",t)},expression:"office.areaName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",[a("label",[e._v("上级机构")]),e._v(" "),a("el-input",{attrs:{"auto-complete":"off",readonly:""},model:{value:e.office.parentCode,callback:function(t){e.$set(e.office,"parentCode",t)},expression:"office.parentCode"}}),e._v(" "),a("el-input",{staticStyle:{"padding-top":"5px"},attrs:{"auto-complete":"off",readonly:""},model:{value:e.office.parentName,callback:function(t){e.$set(e.office,"parentName",t)},expression:"office.parentName"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",[a("label",[e._v("备注")]),e._v(" "),a("el-input",{attrs:{"auto-complete":"off",type:"textarea",rows:2},model:{value:e.office.remarks,callback:function(t){e.$set(e.office,"remarks",t)},expression:"office.remarks"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{icon:"el-icon-close"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:e.saveData}},[e._v("保 存")])],1)],1)],1)},o=[],r={render:i,staticRenderFns:o};t.a=r},599:function(e,t,a){"use strict";function i(e){a(1072)}Object.defineProperty(t,"__esModule",{value:!0});var o=a(706),r=a(1101),c=a(12),n=i,s=c(o.a,r.a,!1,n,null,null);t.default=s.exports},706:function(e,t,a){"use strict";var i=a(23),o=a.n(i),r=a(22),c=a.n(r),n=a(14),s=function(e){return a.i(n.a)("/cc/area/listForLazy",e)},l=function(e){return a.i(n.a)("/cc/office/listForLazy",e)},f=function(e){return a.i(n.a)("/cc/office/list",e)},u=function(e){return a.i(n.a)("/cc/office/insert",e)},d=function(e){return a.i(n.a)("/cc/office/update",e)},p=function(e){return a.i(n.a)("/cc/office/delete",e)};t.a={data:function(){return{activeName:"areaTab",showAddBtn:!1,queryOfficeTypeCode:"",queryOfficeTypeName:"",queryOfficeName:"",treeProps:{label:"name",children:"children"},currentPage:1,pageSize:10,dataCount:0,clickData1:{},clickNode1:{},clickData2:{},clickNode2:{},tableData:[],dialogVisible:!1,dialogTitle:"",labelWidth:"120px",codeReadOnly:!1,action:"",office:{id:"",code:"",name:"",type:"",typeName:"",officeLevel:"",parentCode:"",parentName:"",areaCode:"",areaName:"",address:"",phone:"",fax:"",sort:"10",remarks:""}}},methods:{handleTabClick:function(){this.showAddBtn="levelTab"===this.activeName},handleSizeChange:function(e){this.pageSize=e,this.qryListOfficeData()},handleCurrentChange:function(e){this.currentPage=e,this.qryListOfficeData()},queryData:function(){this.queryListOfficeData()},handleAdd:function(e){this.action="add",this.dialogTitle="机构增加",this.codeReadOnly=!1,this.office.id="",this.office.code="",this.office.name="",this.office.address="",this.office.phone="",this.office.fax="",this.office.sort="10",this.office.remarks="",this.office.type="",this.office.typeName="",this.office.officeLevel="",this.office.parentCode="",this.office.parentName="",this.office.areaCode="",this.office.areaName="",null!=e&&void 0!=e?(this.office.officeLevel=(parseInt(e.officeLevel)+1).toString(),this.office.parentCode=e.code,this.office.parentName=e.name,this.office.areaCode=e.areaCode,this.office.areaName=e.areaName,this.dialogVisible=!0):"levelTab"===this.activeName&&(null!=this.clickData2.officeLevel&&void 0!=this.clickData2.officeLevel?(this.office.officeLevel=(parseInt(this.clickData2.officeLevel)+1).toString(),this.office.parentCode=this.clickData2.code,this.office.parentName=this.clickData2.name,this.office.areaCode=this.clickData2.areaCode,this.office.areaName=this.clickData2.areaName,this.dialogVisible=!0):this.$message({type:"error",message:"请先选择组织机构"}))},handleEdit:function(e){this.action="edit",this.dialogVisible=!0,this.dialogTitle="机构修改",this.codeReadOnly=!0,this.office.id=e.id,this.office.code=e.code,this.office.name=e.name,this.office.address=e.address,this.office.phone=e.phone,this.office.fax=e.fax,this.office.sort=e.sort,this.office.remarks=e.remarks,this.office.type=e.type,this.office.typeName=e.typeName,this.office.officeLevel=e.officeLevel,this.office.parentCode=e.parentCode,this.office.parentName=e.parentName,this.office.areaCode=e.areaCode,this.office.areaName=e.areaName},handleDelete:function(e){var t=this;this.$confirm("确定删除该键值记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){t.deleteData(e)}).catch(function(){})},saveData:function(){"add"===this.action&&this.insertData(),"edit"===this.action&&this.updateData()},handleNodeClick1:function(e,t){this.clickNode1=t,this.clickData1=e,this.currentPage=1,this.getListOfficeData1()},handleNodeClick2:function(e,t){this.clickNode2=t,this.clickData2=e,this.currentPage=1,this.getListOfficeData2()},loadNode1:function(e,t){var a=this;return c()(o.a.mark(function i(){var r,c,n;return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return r="",c="0",null!=e.key&&void 0!=e.key?(r=e.key,c="0"):(r="",c="1"),i.next=5,a.getLazyListAreaData(r,c,1,0);case 5:return n=i.sent,i.abrupt("return",t(n.list));case 7:case"end":return i.stop()}},i,a)}))()},getLazyListAreaData:function(e,t,a,i){var r=this;return c()(o.a.mark(function a(){var i;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s({parentCode:e,scopeType:"2",isInit:t,page:1,size:0});case 2:if(i=a.sent,1==i.status){a.next=6;break}return r.$message({type:"error",message:"获取数据失败"}),a.abrupt("return");case 6:return a.abrupt("return",i.data);case 7:case"end":return a.stop()}},a,r)}))()},loadNode2:function(e,t){var a=this;return c()(o.a.mark(function i(){var r,c,n;return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return r="",c="0",null!=e.key&&void 0!=e.key?(r=e.key,c="0"):(r="",c="1"),i.next=5,a.getLazyListOfficeData(r,c,1,0);case 5:return n=i.sent,i.abrupt("return",t(n.list));case 7:case"end":return i.stop()}},i,a)}))()},getLazyListOfficeData:function(e,t,a,i){var r=this;return c()(o.a.mark(function a(){var i;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,l({parentCode:e,scopeType:"2",isInit:t,page:1,size:0});case 2:if(i=a.sent,1==i.status){a.next=6;break}return r.$message({type:"error",message:"获取数据失败"}),a.abrupt("return");case 6:return a.abrupt("return",i.data);case 7:case"end":return a.stop()}},a,r)}))()},queryListOfficeData:function(){var e=this;return c()(o.a.mark(function t(){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f({type:e.queryOfficeTypeCode,name:e.queryOfficeName,page:e.currentPage,size:e.pageSize});case 2:if(a=t.sent,1==a.status){t.next=6;break}return e.$message({type:"error",message:"获取数据失败"}),t.abrupt("return");case 6:e.tableData=[],a.data.list.forEach(function(t){return e.tableData.push(t)}),e.dataCount=a.data.total;case 9:case"end":return t.stop()}},t,e)}))()},qryListOfficeData:function(){"areaTab"===this.activeName&&this.getListOfficeData1(),"levelTab"===this.activeName&&this.getListOfficeData2()},getListOfficeData1:function(){var e=this;return c()(o.a.mark(function t(){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f({areaCode:e.clickData1.code,page:e.currentPage,size:e.pageSize});case 2:if(a=t.sent,1==a.status){t.next=6;break}return e.$message({type:"error",message:"获取数据失败"}),t.abrupt("return");case 6:e.tableData=[],a.data.list.forEach(function(t){return e.tableData.push(t)}),e.dataCount=a.data.total;case 9:case"end":return t.stop()}},t,e)}))()},getListOfficeData2:function(){var e=this;return c()(o.a.mark(function t(){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f({parentCode:e.clickData2.code,officeLevel:parseInt(e.clickData2.officeLevel)+1,page:e.currentPage,size:e.pageSize});case 2:if(a=t.sent,1==a.status){t.next=6;break}return e.$message({type:"error",message:"获取数据失败"}),t.abrupt("return");case 6:e.tableData=[],a.data.list.forEach(function(t){return e.tableData.push(t)}),e.dataCount=a.data.total;case 9:case"end":return t.stop()}},t,e)}))()},insertData:function(){var e=this;return c()(o.a.mark(function t(){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(e.office);case 2:if(a=t.sent,1==a.status){t.next=6;break}return e.$message({type:"error",message:"增加数据失败"}),t.abrupt("return");case 6:e.$message({type:"success",message:"增加数据完成"}),e.dialogVisible=!1,e.qryListOfficeData(),e.clickNode2.loaded=!1;case 10:case"end":return t.stop()}},t,e)}))()},updateData:function(){var e=this;return c()(o.a.mark(function t(){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d(e.office);case 2:if(a=t.sent,1==a.status){t.next=6;break}return e.$message({type:"error",message:"更新数据失败"}),t.abrupt("return");case 6:e.$message({type:"success",message:"更新数据完成"}),e.dialogVisible=!1,e.qryListOfficeData(),e.clickNode2.loaded=!1;case 10:case"end":return t.stop()}},t,e)}))()},deleteData:function(e){var t=this;return c()(o.a.mark(function a(){var i;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p({id:e.id});case 2:if(i=a.sent,1==i.status){a.next=6;break}return t.$message({type:"error",message:"删除数据失败"}),a.abrupt("return");case 6:t.$message({type:"success",message:"删除数据完成"}),t.qryListOfficeData(),t.clickNode2.loaded=!1;case 9:case"end":return a.stop()}},a,t)}))()}}}},804:function(e,t,a){t=e.exports=a(592)(!1),t.push([e.i,".allcover{position:absolute;top:0;right:0}.ctt{left:50%;transform:translate(-50%,-50%)}.ctt,.tb{position:absolute;top:50%}.tb{transform:translateY(-50%)}.lr{position:absolute;left:50%;transform:translateX(-50%)}",""])}});