webpackJsonp([2],{1063:function(e,t,a){var r=a(795);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(593)("15aa5b1c",r,!0)},1068:function(e,t,a){var r=a(800);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(593)("95b1cd20",r,!0)},1086:function(e,t,a){"use strict";function r(e){a(1063)}var o=a(707),n=a(1091),s=a(12),l=r,i=s(o.a,n.a,!1,l,null,null);t.a=i.exports},1091:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{staticClass:"roleDialog",attrs:{title:e.title,visible:e.visible,width:"50%",modal:"","before-close":e.dialogClose},on:{"update:visible":function(t){e.visible=t},open:e.open}},[a("el-form",{ref:"role",attrs:{model:e.role,rules:e.rules}},[a("div",{staticStyle:{display:"none"},attrs:{slot:""},slot:"default"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.role.id,expression:"role.id"}],attrs:{type:"hidden"},domProps:{value:e.role.id},on:{input:function(t){t.target.composing||e.$set(e.role,"id",t.target.value)}}})]),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"name"}},[a("label",[e._v("角色名称")]),e._v(" "),a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.role.name,callback:function(t){e.$set(e.role,"name",t)},expression:"role.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"roleCode"}},[a("label",[e._v("角色代码")]),e._v(" "),a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.role.roleCode,callback:function(t){e.$set(e.role,"roleCode",t)},expression:"role.roleCode"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"roleType"}},[a("label",[e._v("角色类型")]),e._v(" "),a("data-dict",{attrs:{dictType:"role_type",dictValue:e.role.roleType,dictLabel:e.role.roleTypeName},on:{"update:dictValue":function(t){e.$set(e.role,"roleType",t)},"update:dictLabel":function(t){e.$set(e.role,"roleTypeName",t)}}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"dataScope"}},[a("label",[e._v("作用域")]),e._v(" "),a("data-dict",{attrs:{dictType:"data_scope",dictValue:e.role.dataScope,dictLabel:e.role.dataScopeName},on:{"update:dictValue":function(t){e.$set(e.role,"dataScope",t)},"update:dictLabel":function(t){e.$set(e.role,"dataScopeName",t)}}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"useable"}},[a("label",[e._v("是否可用")]),e._v(" "),a("data-dict",{attrs:{dictType:"yes_no",dictValue:e.role.useable,dictLabel:e.role.useableName},on:{"update:dictValue":function(t){e.$set(e.role,"useable",t)},"update:dictLabel":function(t){e.$set(e.role,"useableName",t)}}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"menuList"}},[a("label",[e._v("菜单")]),e._v(" "),a("el-tree",{ref:"tree",attrs:{"show-checkbox":"",props:e.treeProps,load:e.loadNode,"node-key":"code",lazy:"","highlight-current":"","default-expand-all":"",accordion:""}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",[a("label",[e._v("备注")]),e._v(" "),a("el-input",{attrs:{"auto-complete":"off",type:"textarea",rows:2},model:{value:e.role.remarks,callback:function(t){e.$set(e.role,"remarks",t)},expression:"role.remarks"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{icon:"el-icon-close"},on:{click:function(t){e.dialogClose()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:function(t){e.saveData("role")}}},[e._v("保 存")])],1)],1)],1)},o=[],n={render:r,staticRenderFns:o};t.a=n},1097:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("bread"),e._v(" "),a("div",{staticClass:"pageTitle"},[a("div",{staticClass:"pageTitleSub"},[a("el-form",[a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"角色名称"},model:{value:e.queryRoleName,callback:function(t){e.queryRoleName=t},expression:"queryRoleName"}})],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("data-dict",{attrs:{dictType:"yes_no",dictValue:e.queryUseable,dictLabel:e.queryUseableName,dictHolder:"是否可用"},on:{"update:dictValue":function(t){e.queryUseable=t},"update:dictLabel":function(t){e.queryUseableName=t}}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.queryData}},[e._v("查 询")]),e._v(" "),a("el-button",{staticStyle:{background:"#fff",color:"#000",border:"1px solid #ccc"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.handleAddClick()}}},[e._v("新 增")])],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"pageLeftRight"},[a("el-table",{attrs:{data:e.tableData,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",width:"100",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{property:"name",label:"角色名称",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{property:"roleTypeName",label:"角色类型",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{property:"dataScopeName",label:"作用域"}}),e._v(" "),a("el-table-column",{attrs:{property:"useableName",label:"是否可用",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",icon:"el-icon-edit"},on:{click:function(a){e.handleEdit(t.row)}}},[e._v("编辑\n                        ")]),e._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-delete"},on:{click:function(a){e.handleDelete(t.row)}}},[e._v("删除\n                        ")])]}}])})],1),e._v(" "),a("div",{staticClass:"Pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,total:e.dataCount,"page-sizes":[10,20,30,40,50],layout:"total, sizes, prev, pager, next"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)]),e._v(" "),a("z-dialog",{attrs:{show:e.show,dialogT:e.dialogTitle,dataShow:e.rowData,checkAction:e.action},on:{"update:show":function(t){e.show=t},"update:dataShow":function(t){e.rowData=t},refreshList:e.getListRoleData}})],1)},o=[],n={render:r,staticRenderFns:o};t.a=n},600:function(e,t,a){"use strict";function r(e){a(1068)}Object.defineProperty(t,"__esModule",{value:!0});var o=a(708),n=a(1097),s=a(12),l=r,i=s(o.a,n.a,!1,l,null,null);t.default=i.exports},646:function(e,t,a){e.exports={default:a(647),__esModule:!0}},647:function(e,t,a){var r=a(31),o=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},707:function(e,t,a){"use strict";var r=a(23),o=a.n(r),n=a(22),s=a.n(n),l=a(646),i=a.n(l),c=a(14),u=function(e){return a.i(c.a)("/cc/role/getRoleMenus",e)},d=function(e){return a.i(c.a)("/cc/menu/treeList",e)},p=function(e){return a.i(c.a)("/cc/role/insert",e)},f=function(e){return a.i(c.a)("/cc/role/update",e)};t.a={data:function(){return{visible:this.show,treeProps:{label:"name",children:"children"},treeData:[],role:{},rules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"}],roleCode:[{required:!0,message:"请输入角色代码",trigger:"blur"}],roleType:[{required:!0,message:"请选择角色类型",trigger:"change"}],useable:[{required:!0,message:"请选择是否可用",trigger:"change"}]}}},props:["show","dialogT","dataShow","checkAction"],watch:{show:function(){this.visible=this.show}},computed:{title:function(){return this.dialogT}},methods:{open:function(){"edit"===this.checkAction?(this.role=JSON.parse(i()(this.dataShow)),delete this.role.createDate,delete this.role.updateDate,this.role.oldRoleCode=this.dataShow.roleCode,this.getRoleMenus(this.dataShow.roleCode)):this.role={}},getRoleMenus:function(e){var t=this;return s()(o.a.mark(function a(){var r;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u({roleCode:e});case 2:if(r=a.sent,1==r.status){a.next=6;break}return t.$message({type:"error",message:"获取数据失败"}),a.abrupt("return");case 6:t.treeData=null===r.data.menuCodes?[]:r.data.menuCodes,t.$refs.tree.setCheckedKeys(null===r.data.menuCodes?[]:r.data.menuCodes,!1);case 8:case"end":return a.stop()}},a,t)}))()},saveData:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;"add"===t.checkAction&&t.insertData(),"edit"===t.checkAction&&t.updateData()})},insertData:function(){var e=this;return s()(o.a.mark(function t(){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.role.menuList=e.$refs.tree.getCheckedKeys(!0),t.next=3,p(e.role);case 3:if(a=t.sent,1==a.status){t.next=7;break}return e.$message({type:"error",message:"增加数据失败"+a.message}),t.abrupt("return");case 7:e.$message({type:"success",message:"增加数据完成"}),e.$emit("refreshList"),e.dialogClose();case 10:case"end":return t.stop()}},t,e)}))()},updateData:function(){var e=this;return s()(o.a.mark(function t(){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.role.menuList=e.$refs.tree.getCheckedKeys(!0),t.next=3,f(e.role);case 3:if(a=t.sent,1==a.status){t.next=7;break}return e.$message({type:"error",message:"更新数据失败"+a.message}),t.abrupt("return");case 7:e.$message({type:"success",message:"更新数据完成"}),e.$emit("refreshList"),e.dialogClose();case 10:case"end":return t.stop()}},t,e)}))()},loadNode:function(e,t){var a=this;return s()(o.a.mark(function r(){var n,s;return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n="",n=null!=e.key&&void 0!=e.key?e.key:"0",r.next=4,a.getListMenuTreeData(n,1,0);case 4:return s=r.sent,a.$refs.tree.setCheckedKeys(a.treeData,!1),r.abrupt("return",t(s.list));case 7:case"end":return r.stop()}},r,a)}))()},getListMenuTreeData:function(e,t,a){var r=this;return s()(o.a.mark(function n(){var s;return o.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,d({parentCode:e,page:t,size:a});case 2:if(s=o.sent,1==s.status){o.next=6;break}return r.$message({type:"error",message:"获取数据失败"}),o.abrupt("return");case 6:return o.abrupt("return",s.data);case 7:case"end":return o.stop()}},n,r)}))()},dialogClose:function(){this.$refs.role.resetFields(),this.treeData=[],this.$refs.tree.setCheckedKeys([]),this.visible=!1,this.$emit("update:show",!1)}}}},708:function(e,t,a){"use strict";var r=a(23),o=a.n(r),n=a(22),s=a.n(n),l=a(14),i=a(1086),c=function(e){return a.i(l.a)("/cc/role/list",e)},u=function(e){return a.i(l.a)("/cc/role/delete",e)};t.a={data:function(){return{queryRoleName:"",queryUseable:"",queryUseableName:"",tableData:[],currentRow:null,offset:0,limit:20,count:2,currentPage:1,pageSize:10,dataCount:0,labelWidth:"120px",codeReadOnly:!1,dialogTitle:"",show:!1,rowData:{},action:""}},created:function(){this.getListRoleData()},methods:{handleSizeChange:function(e){this.pageSize=e,this.queryData()},handleCurrentChange:function(e){this.currentPage=e,this.queryData()},queryData:function(){this.getListRoleData(this.queryRoleName,this.queryUseable)},getListRoleData:function(e,t){var a=this;return s()(o.a.mark(function r(){var n;return o.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c({name:e,useable:t,page:a.currentPage,size:a.pageSize});case 2:if(n=r.sent,1==n.status){r.next=6;break}return a.$message({type:"error",message:"获取数据失败"}),r.abrupt("return");case 6:a.tableData=[],n.data.list.forEach(function(e){return a.tableData.push(e)}),a.dataCount=n.data.total;case 9:case"end":return r.stop()}},r,a)}))()},handleAddClick:function(){this.action="add",this.dialogTitle="角色增加",this.open()},handleEdit:function(e){this.rowData=e,this.open(),this.action="edit",this.dialogTitle="角色修改"},handleDelete:function(e){var t=this;this.$confirm("确定删除该键值记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){t.deleteData(e)}).catch(function(){})},deleteData:function(e){var t=this;return s()(o.a.mark(function a(){var r;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u({roleCode:e.roleCode});case 2:if(r=a.sent,1==r.status){a.next=6;break}return t.$message({type:"error",message:"删除数据失败"}),a.abrupt("return");case 6:t.$message({type:"success",message:"删除数据完成"}),t.getListRoleData();case 8:case"end":return a.stop()}},a,t)}))()},open:function(){this.show=!0}},components:{ZDialog:i.a}}},795:function(e,t,a){t=e.exports=a(592)(!1),t.push([e.i,".allcover{position:absolute;top:0;right:0}.ctt{left:50%;transform:translate(-50%,-50%)}.ctt,.tb{position:absolute;top:50%}.tb{transform:translateY(-50%)}.lr{position:absolute;left:50%;transform:translateX(-50%)}",""])},800:function(e,t,a){t=e.exports=a(592)(!1),t.push([e.i,".allcover{position:absolute;top:0;right:0}.ctt{left:50%;transform:translate(-50%,-50%)}.ctt,.tb{position:absolute;top:50%}.tb{transform:translateY(-50%)}.lr{position:absolute;left:50%;transform:translateX(-50%)}",""])}});